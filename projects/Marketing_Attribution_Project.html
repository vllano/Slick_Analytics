<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-Touch Attribution Project</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Roboto+Mono:wght@400;600&display=swap" rel="stylesheet">
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        :root {
            --primary-color: #5a55d1; 
            --secondary-color: #1abc9c;
            --light-bg: #f7f8fc;
            --dark-blue: #2c3e50;
            --text-color: #34495e;
            --border-radius: 10px;
            --shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--light-bg);
            color: var(--text-color);
            font-size: 1.05rem;
            line-height: 1.6;
        }

        .container-fluid { max-width: 1200px; }

        .header {
            background: linear-gradient(135deg, var(--primary-color), #7b2cbf);
            color: white;
            padding: 5rem 2rem;
            border-radius: var(--border-radius);
            text-align: center;
            margin-bottom: 3rem;
        }

        .header h1 { font-weight: 700; letter-spacing: -1px; }
        .header .lead { opacity: 0.9; max-width: 700px; margin: 1rem auto 0; }

        .section-title {
            font-weight: 700;
            color: var(--dark-blue);
            margin-bottom: 2rem;
            padding-bottom: 0.75rem;
            border-bottom: 3px solid var(--primary-color);
            display: inline-block;
        }

        .card {
            border: none;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            background-color: #ffffff;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
        }

        .kpi-card { padding: 2rem; text-align: center; }
        .kpi-icon { font-size: 3rem; margin-bottom: 1rem; color: var(--primary-color); }
        .kpi-label { font-weight: 500; color: #7f8c8d; margin-bottom: 0.5rem; }
        .kpi-value { font-size: 2.5rem; font-weight: 700; color: var(--dark-blue); }

        .code-block {
            background-color: #272822; /* Monokai-like background */
            color: #f8f8f2;
            padding: 1.5rem;
            border-radius: var(--border-radius);
            font-family: 'Roboto Mono', monospace;
            font-size: 0.9em;
            overflow-x: auto;
            border: 1px solid #444;
        }
        
        .code-block .comment { color: #75715e; }
        .code-block .keyword { color: #f92672; }
        .code-block .function { color: #66d9ef; }
        .code-block .string { color: #a6e22e; }
        .code-block .number { color: #ae81ff; }

        .highlight-success { color: var(--secondary-color); font-weight: 700; }
        .highlight-danger { color: #e74c3c; font-weight: 700; }
        .text-bold { font-weight: 700; }
        .section { margin-bottom: 4rem; }
    </style>
</head>
<body>

    <div class="container-fluid my-5">

        <header class="header">
            <h1 class="display-4">Optimizing Marketing Spend with Multi-Touch Attribution</h1>
        </header>

        <section id="summary" class="section">
            <h2 class="section-title">Executive Summary</h2>
            <div class="card">
                <div class="card-body p-4 fs-5">
                    <p><span class="text-bold">The Business Problem:</span> A high-growth DTC brand, faced stagnating marketing efficiency. Despite a growing ad budget, the blended Return on Ad Spend (ROAS) was declining. The root cause was an over-reliance on a last-touch attribution model, which systematically overvalued bottom-funnel channels (like Branded Search and Retargeting) and undervalued the upper-funnel channels that create initial demand.</p>
                    <p><span class="text-bold">The Solution & Analysis:</span> I developed and implemented a time-decay multi-touch attribution model to re-distribute conversion credit across the entire customer journey. This provided a far more accurate view of channel performance, revealing that Content/SEO and Podcast Ads were majorly undervalued, with a true ROAS of <span class="highlight-success">4.8x</span> and <span class="highlight-success">4.2x</span> respectively.</p>
                    <p><span class="text-bold">The Impact:</span> Based on these insights, I recommended a strategic reallocation of <span class="text-bold">20% of the quarterly ad budget ($400,000)</span> from inefficient retargeting campaigns into high-performing SEO and podcast sponsorships. This strategic shift is projected to <span class="highlight-success">increase overall marketing ROAS by 22%</span> and generate an additional <span class="highlight-success">$1.1M in incremental revenue</span> over the next two quarters.</p>
                </div>
            </div>
        </section>

        <section id="kpis" class="mb-5">
            <h2 class="section-title">Project Baseline: Key Metrics</h2>
            <div class="row g-4">
                <div class="col-md-4">
                    <div class="card kpi-card h-100">
                        <i class="bi bi-graph-up-arrow kpi-icon"></i>
                        <div class="kpi-label">Blended ROAS</div>
                        <div class="kpi-value">3.1x</div>
                        <p class="text-muted small">(Revenue / Ad Cost)</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card kpi-card h-100">
                        <i class="bi bi-person-bounding-box kpi-icon"></i>
                        <div class="kpi-label">Blended CAC</div>
                        <div class="kpi-value">$42.50</div>
                         <p class="text-muted small">(Spend / New Customers)</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card kpi-card h-100">
                        <i class="bi bi-star-fill kpi-icon"></i>
                        <div class="kpi-label">LTV:CAC Ratio</div>
                        <div class="kpi-value">2.8 : 1</div>
                         <p class="text-muted small">(North Star for Growth)</p>
                    </div>
                </div>
            </div>
        </section>

        <hr class="my-5">

        <section id="analysis" class="mb-5">
            <h2 class="section-title">Analysis & Methodology</h2>
            <h4 class="mb-3 fw-bold">Justification for Time-Decay Model</h4>
             <p class="lead mb-4">While various multi-touch models exist, the <strong>Time-Decay model</strong> was selected as most appropriate for the company's typical consideration cycle. It correctly assigns escalating credit to touchpoints as a consumer moves closer to purchase, reflecting building momentum. It is superior to a last-touch model which ignores upper-funnel influence, and more suitable than a U-shaped model as our "first touch" channels are broad (podcasts, SEO) and less impactful than the specific consideration touches later in the journey.</p>
            
            <h4 class="mb-3 mt-4 fw-bold">Phase 1: Baseline with Last-Touch Model (SQL)</h4>
            <p class="lead mb-4">The initial analysis replicated the company's existing last-touch model to establish a baseline. This model assigns 100% of conversion credit to the final touchpoint, leading to skewed perceptions of channel value.</p>

            <pre class="code-block"><code class="language-sql"><span class="comment">-- SQL: Calculate ROAS using a more robust Last-Touch Attribution</span>
<span class="keyword">WITH</span> user_journeys <span class="keyword">AS</span> (
    <span class="comment">-- Isolate events within a 30-day lookback window of each transaction</span>
    <span class="keyword">SELECT</span> 
        t.transaction_id,
        t.user_id,
        t.revenue,
        e.source_channel,
        <span class="function">ROW_NUMBER</span>() <span class="keyword">OVER</span>(<span class="keyword">PARTITION BY</span> t.transaction_id <span class="keyword">ORDER BY</span> e.timestamp <span class="keyword">DESC</span>) <span class="keyword">AS</span> touch_rank
    <span class="keyword">FROM</span> transactions <span class="keyword">AS</span> t
    <span class="keyword">JOIN</span> marketing_events <span class="keyword">AS</span> e 
        <span class="keyword">ON</span> t.user_id = e.user_id
        <span class="keyword">AND</span> e.timestamp <span class="keyword">BETWEEN</span> <span class="function">DATE_SUB</span>(t.transaction_time, <span class="keyword">INTERVAL</span> <span class="number">30</span> <span class="keyword">DAY</span>) <span class="keyword">AND</span> t.transaction_time
),
last_touch_revenue <span class="keyword">AS</span> (
    <span class="comment">-- Attribute 100% of revenue to the final touchpoint (rank = 1)</span>
    <span class="keyword">SELECT</span>
        source_channel,
        <span class="function">SUM</span>(revenue) <span class="keyword">AS</span> total_revenue
    <span class="keyword">FROM</span> user_journeys
    <span class="keyword">WHERE</span> touch_rank = <span class="number">1</span>
    <span class="keyword">GROUP BY</span> source_channel
)
<span class="comment">-- Final calculation joining attributed revenue with channel cost</span>
<span class="keyword">SELECT</span>
    ltr.source_channel,
    ltr.total_revenue,
    c.total_cost,
    (ltr.total_revenue / c.total_cost) <span class="keyword">AS</span> roas
<span class="keyword">FROM</span> last_touch_revenue ltr
<span class="keyword">JOIN</span> channel_costs c <span class="keyword">ON</span> ltr.source_channel = c.channel
<span class="keyword">ORDER BY</span> roas <span class="keyword">DESC</span>;</code></pre>
<br>
            <h4 class="mb-3 fw-bold">Phase 2: Implementing a Time-Decay Multi-Touch Model (Python)</h4>
            <p class="lead mb-4">To create a more accurate picture, I implemented a time-decay attribution model in Python. This model assigns credit to all touchpoints in a journey, giving more weight to those closer to the conversion event. A 7-day half-life was used, meaning a touchpoint 7 days before conversion gets half the credit of one on the day of conversion.</p>
            
            <pre class="code-block"><code class="language-python"><span class="comment"># Python: Vectorized function for Time-Decay Attribution</span>
<span class="keyword">import</span> pandas <span class="keyword">as</span> pd
<span class="keyword">import</span> numpy <span class="keyword">as</span> np

<span class="keyword">def</span> <span class="function">time_decay_attribution</span>(df: pd.DataFrame, conversion_id_col: str, revenue_col: str, time_diff_col: str, half_life_days: int = <span class="number">7</span>) -> pd.DataFrame:
    <span class="string">"""
    Calculates time-decay attributed revenue in a vectorized manner.
    
    Args:
        df: DataFrame with one row per touchpoint. Must include conversion ID,
            revenue for that conversion, and time difference from touchpoint to conversion.
        conversion_id_col: Name of the column identifying each unique conversion journey.
        revenue_col: Name of the column with the total revenue for the conversion.
        time_diff_col: Name of column with time difference in days.
        half_life_days: The half-life for the decay function.

    Returns:
        DataFrame with new columns for weight and attributed revenue.
    """</span>
    
    <span class="comment"># Calculate weight using an exponential decay formula</span>
    df[<span class="string">'weight'</span>] = np.<span class="function">exp</span>(-np.<span class="function">log</span>(<span class="number">2</span>) * df[time_diff_col] / half_life_days)
    
    <span class="comment"># Calculate the total weight for each conversion journey</span>
    df[<span class="string">'total_journey_weight'</span>] = df.<span class="function">groupby</span>(conversion_id_col)[<span class="string">'weight'</span>].<span class="function">transform</span>(<span class="string">'sum'</span>)
    
    <span class="comment"># Calculate normalized weight for each touchpoint</span>
    df[<span class="string">'normalized_weight'</span>] = df[<span class="string">'weight'</span>] / df[<span class="string">'total_journey_weight'</span>]
    
    <span class="comment"># Distribute revenue based on the normalized weight</span>
    df[<span class="string">'attributed_revenue'</span>] = df[revenue_col] * df[<span class="string">'normalized_weight'</span>]
    
    <span class="keyword">return</span> df
</code></pre>
        </section>

        <hr class="my-5">

        <section id="results" class="section">
            <h2 class="section-title">Results & Insights</h2>
            <p class="lead mb-4">The new model painted a dramatically different picture of channel effectiveness. It highlighted where value was truly being created versus where it was simply being "harvested." The chart below visualizes the dramatic shift in perceived ROAS from the flawed last-touch model to the more accurate multi-touch model.</p>

            <div class="card p-3 mb-5">
                <canvas id="roasChart"></canvas>
            </div>

            <div class="card mt-4">
                <div class="table-responsive">
                    <table class="table table-hover table-striped mb-0 fs-6">
                        <thead class="table-light">
                            <tr>
                                <th>Marketing Channel</th>
                                <th class="text-center">Last-Touch ROAS</th>
                                <th class="text-center">Multi-Touch ROAS</th>
                                <th class="text-center">Change</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td><strong>SEO / Content</strong></td><td class="text-center">0.8x</td><td class="text-center"><span class="highlight-success">4.8x</span></td><td class="text-center"><span class="highlight-success">+400%</span></td></tr>
                            <tr><td><strong>Podcast Ads</strong></td><td class="text-center">1.1x</td><td class="text-center"><span class="highlight-success">4.2x</span></td><td class="text-center"><span class="highlight-success">+282%</span></td></tr>
                            <tr><td><strong>Paid Search (Non-Branded)</strong></td><td class="text-center">3.5x</td><td class="text-center">3.8x</td><td class="text-center">+9%</td></tr>
                            <tr><td><strong>Facebook Prospecting</strong></td><td class="text-center">2.5x</td><td class="text-center">2.2x</td><td class="text-center"><span class="highlight-danger">-12%</span></td></tr>
                            <tr><td><strong>Paid Search (Branded)</strong></td><td class="text-center">8.2x</td><td class="text-center"><span class="highlight-danger">3.1x</span></td><td class="text-center"><span class="highlight-danger">-62%</span></td></tr>
                            <tr><td><strong>Facebook Retargeting</strong></td><td class="text-center">9.5x</td><td class="text-center"><span class="highlight-danger">2.9x</span></td><td class="text-center"><span class="highlight-danger">-69%</span></td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <hr class="my-5">
        
        <section id="recommendations" class="section">
            <h2 class="section-title">Strategic Recommendations</h2>
            <div class="row g-4">
                <div class="col-lg-3 col-md-6">
                    <div class="card h-100">
                        <div class="card-body">
                            <h5 class="card-title fw-bold">1. Aggressively Scale SEO</h5>
                            <p class="card-text">Reallocate <span class="text-bold">15% ($300k)</span> from retargeting to expand content creation and technical SEO. This is the most undervalued and efficient demand-generation engine.</p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <div class="card h-100">
                        <div class="card-body">
                            <h5 class="card-title fw-bold">2. Double Down on Podcasts</h5>
                            <p class="card-text">Shift <span class="text-bold">5% ($100k)</span> to secure sponsorships on new, high-affinity podcasts. This is a proven, high-ROAS awareness channel.</p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <div class="card h-100">
                        <div class="card-body">
                            <h5 class="card-title fw-bold">3. Right-Size "Closing" Channels</h5>
                            <p class="card-text">Reduce budgets for Branded Search & Retargeting. Their role is to efficiently capture existing intent, not drive new discovery at scale.</p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <div class="card h-100">
                        <div class="card-body">
                            <h5 class="card-title fw-bold">4. Implement Causal Testing</h5>
                            <p class="card-text">Use the reallocated budget to run geo-based incremental lift tests, confirming the causal impact of increased upper-funnel spend on the business.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <hr class="my-5">

        <section id="impact" class="section">
            <h2 class="section-title">Projected Impact & Monitoring</h2>
            <div class="row g-4 mb-4">
                <div class="col-md-4">
                    <div class="card kpi-card h-100">
                        <i class="bi bi-graph-up-arrow kpi-icon text-success"></i>
                        <div class="kpi-label">Projected ROAS Increase</div>
                        <div class="kpi-value text-success">+22%</div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card kpi-card h-100">
                        <i class="bi bi-cash-stack kpi-icon text-success"></i>
                        <div class="kpi-label">Incremental Revenue (2 Qtrs)</div>
                        <div class="kpi-value text-success">$1.1M</div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card kpi-card h-100">
                        <i class="bi bi-gem kpi-icon text-success"></i>
                        <div class="kpi-label">Projected LTV:CAC Ratio</div>
                        <div class="kpi-value text-success">3.5 : 1</div>
                    </div>
                </div>
            </div>
            <div class="card">
                <div class="card-header fw-bold">
                    Monitoring Plan: The Performance Dashboard
                </div>
                <div class="card-body">
                    <p>To track the success of this strategic shift, a live Tableau/Looker dashboard will be deployed with the following key components:</p>
                    <ul>
                        <li><strong>Primary KPI Tracker:</strong> A time-series chart of blended ROAS, CAC, and LTV:CAC ratio vs. targets.</li>
                        <li><strong>Channel Performance View:</strong> A drill-down view showing the time-decay ROAS for each marketing channel, updated weekly.</li>
                        <li><strong>Customer Journey Explorer:</strong> A Sankey diagram or pathing chart visualizing the most common conversion paths.</li>
                        <li><strong>Incremental Lift Test Monitor:</strong> A dedicated view to track the results of our geo-based lift tests for podcast and SEO investments.</li>
                    </ul>
                </div>
            </div>
        </section>
        
        <hr class="my-5">

        <section id="limitations" class="section">
            <h2 class="section-title">Limitations & Next Steps</h2>
            <div class="card">
                <div class="card-body">
                    <p class="mb-4">This attribution model provides a massive leap in accuracy, but no model is perfect. Key opportunities for future enhancement include accounting for view-through conversions, offline effects (brand halo), and the diminishing returns of channel spend.</p>
                    <p class="mb-0 text-bold">Strategic Next Steps:</p>
                    <ul class="mt-2">
                        <li><strong>Incorporate Marketing Mix Modeling (MMM):</strong> Develop a top-down MMM to run in parallel with this bottom-up MTA model. This unified measurement approach will allow for more holistic budget allocation across both online and offline channels.</li>
                        <li><strong>Test Alternative Models:</strong> Run this time-decay model against a U-shaped and a data-driven (Shapley value) model to see if they provide additional explanatory power for our specific customer journey.</li>
                        <li><strong>Enrich with Customer Data:</strong> Integrate CRM data to analyze how marketing touchpoints impact different customer segments and influence first-order value vs. long-term LTV.</li>
                    </ul>
                </div>
            </div>
        </section>

        <footer class="text-center text-muted mt-5 py-4 border-top">
            <p>&copy; 2025 Victor Llano | All rights reserved.</p>
        </footer>
    </div>
    
    <script>
        const ctx = document.getElementById('roasChart');
        
        const roasData = {
            labels: ['SEO / Content', 'Podcast Ads', 'Paid Search (Non-Branded)', 'Facebook Prospecting', 'Paid Search (Branded)', 'Facebook Retargeting'],
            datasets: [
                {
                    label: 'Last-Touch ROAS',
                    data: [0.8, 1.1, 3.5, 2.5, 8.2, 9.5],
                    backgroundColor: 'rgba(231, 76, 60, 0.6)', // Faded Red
                    borderColor: 'rgba(231, 76, 60, 1)',
                    borderWidth: 1
                },
                {
                    label: 'Multi-Touch ROAS',
                    data: [4.8, 4.2, 3.8, 2.2, 3.1, 2.9],
                    backgroundColor: 'rgba(26, 188, 156, 0.7)', // Teal
                    borderColor: 'rgba(26, 188, 156, 1)',
                    borderWidth: 1
                }
            ]
        };

        new Chart(ctx, {
            type: 'bar',
            data: roasData,
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'top',
                    },
                    title: {
                        display: true,
                        text: 'ROAS Comparison: Last-Touch vs. Multi-Touch Model',
                        font: {
                           size: 18,
                           family: "'Inter', sans-serif"
                        },
                        color: '#2c3e50',
                        padding: {
                            bottom: 20
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Return on Ad Spend (ROAS)',
                             font: {
                               size: 14
                            }
                        }
                    },
                    x: {
                         title: {
                            display: true,
                            text: 'Marketing Channel',
                             font: {
                               size: 14
                            }
                        }
                    }
                }
            }
        });
    </script>
</body>
</html>